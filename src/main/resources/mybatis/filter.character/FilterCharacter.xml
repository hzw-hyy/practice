<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.hyy.practice.filter.character.dao.FilterRuleDao">
    <resultMap id="filterRuleResult" type="com.example.hyy.practice.filter.character.model.FilterRuleModel">
        <result column="rule_code" property="ruleCode"/>
        <result column="rule_name" property="ruleName"/>
        <collection property="filterCharacterModels"
                    ofType="com.example.hyy.practice.filter.character.model.FilterCharacterModel">
            <result column="filter_character" property="filterCharacter"/>
        </collection>
        <collection property="filterUsePathModels"
                    ofType="com.example.hyy.practice.filter.character.model.FilterUsePathModel">
            <result column="use_path" property="usePath"/>
        </collection>
    </resultMap>

    <select id="selectFilterRule" resultMap="filterRuleResult">
        select rule_code, rule_name, use_path, filter_character
        from filter_rule fr,
             filter_character fc,
             filter_user_path fup
        where fr.id = fc.rule_id
        and fr.id = fup.rule_id
        and use_path =  #{filterCharacterPageVo.userPath}
    </select>


    <select id="selectFilterRuleTwo" resultMap="filterRuleResult">
        select rule_code, rule_name, use_path, filter_character
        from filter_rule fr,
             filter_character fc,
             filter_user_path fup
        where fr.id = fc.rule_id
        and fr.id = fup.rule_id
    </select>
</mapper>